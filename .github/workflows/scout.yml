    - name: Commit and Push changes
      env:
        COMMIT_MSG: ${{ steps.scout_step.outputs.COMMIT_MSG }}
      run: |
        # 1. Настройка автора
        git config --global user.name 'VPN Scout Bot'
        git config --global user.email 'bot@noreply.github.com'
        
        # 2. Добавляем файлы
        # Используем подстановку, чтобы не вылетало, если файлов нет
        git add *.txt 2>/dev/null || true
        
        # 3. ПРОВЕРКА: Если индекс пуст — выходим
        if git diff --cached --quiet; then
          echo "No changes to commit. Exiting."
          exit 0
        fi

        # 4. КОММИТ
        # Используем переменную из env, чтобы избежать проблем с кавычками в сообщении
        git commit -m "${COMMIT_MSG:-Scout Automatic Update}"

        # 5. ОБНОВЛЕНИЕ (Pull Rebase)
        # На случай, если во время работы чекера в репо прилетел другой коммит
        git pull origin main --rebase
        
        # 6. ОТПРАВКА
        git push
